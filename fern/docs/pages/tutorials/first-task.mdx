---
title: Creating Your First Task
subtitle: A step-by-step guide to creating and managing tasks
slug: first-task
---

This tutorial will walk you through creating your first task, submitting messages, and retrieving the conversation history using the AUI API.

## What You'll Build

By the end of this tutorial, you'll have:

- Created a task with custom metadata
- Submitted user messages to the task
- Retrieved the conversation history
- Understood the basic task lifecycle

## Prerequisites

- An AUI API key
- Basic knowledge of REST APIs
- A tool to make HTTP requests (curl, Postman, or code)

## Step 1: Set Up Your Environment

First, store your API key in an environment variable:

```bash
export AUI_API_KEY="your_api_key_here"
```

## Step 2: Create a Task

Create a new task with metadata to track the user and session:

```bash
curl -X POST https://api.aui.io/tasks \
  -H "x-network-api-key: $AUI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "metadata": {
      "user_id": "user_12345",
      "session_id": "session_67890",
      "channel": "web",
      "context": {
        "page": "product_page",
        "product_id": "prod_abc123"
      }
    }
  }'
```

**Expected Response:**

```json
{
  "task_id": "task_xyz789",
  "created_at": "2025-11-05T23:00:00Z",
  "metadata": {
    "user_id": "user_12345",
    "session_id": "session_67890",
    "channel": "web",
    "context": {
      "page": "product_page",
      "product_id": "prod_abc123"
    }
  }
}
```

<Tip>
Save the `task_id` from the response - you'll need it for all subsequent operations.
</Tip>

## Step 3: Submit Your First Message

Now submit a message from the user to the task:

```bash
curl -X POST https://api.aui.io/tasks/task_xyz789/messages \
  -H "x-network-api-key: $AUI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "I am interested in this product. Can you tell me more about it?",
    "actor": "user"
  }'
```

**Expected Response:**

```json
{
  "message_id": "msg_001",
  "task_id": "task_xyz789",
  "content": "I am interested in this product. Can you tell me more about it?",
  "actor": "user",
  "timestamp": "2025-11-05T23:01:00Z"
}
```

## Step 4: Wait for Agent Response

Apollo-1 will process your message and generate a response. In a production application, you would typically use the WebSocket API for real-time responses, but for this tutorial, we'll poll the messages endpoint.

Wait a moment, then retrieve all messages:

```bash
curl -X GET https://api.aui.io/tasks/task_xyz789/messages \
  -H "x-network-api-key: $AUI_API_KEY"
```

**Expected Response:**

```json
{
  "messages": [
    {
      "message_id": "msg_001",
      "content": "I am interested in this product. Can you tell me more about it?",
      "actor": "user",
      "timestamp": "2025-11-05T23:01:00Z"
    },
    {
      "message_id": "msg_002",
      "content": "I'd be happy to help you learn more about this product! It's one of our most popular items. What specific aspects would you like to know about - features, pricing, availability, or something else?",
      "actor": "agent",
      "timestamp": "2025-11-05T23:01:05Z"
    }
  ],
  "pagination": {
    "total": 2,
    "page": 1,
    "page_size": 50,
    "has_more": false
  }
}
```

## Step 5: Continue the Conversation

Submit another message to continue the conversation:

```bash
curl -X POST https://api.aui.io/tasks/task_xyz789/messages \
  -H "x-network-api-key: $AUI_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "content": "What are the key features?",
    "actor": "user"
  }'
```

## Using the SDK

Here's how to accomplish the same workflow using the official SDKs:

<CodeBlocks>
  <CodeBlock title="TypeScript">
    ```typescript
    import { ApolloClient } from '@aui.io/aui-client';

    const client = new ApolloClient({
      networkApiKey: process.env.AUI_API_KEY
    });

    async function createFirstTask() {
      // Step 1: Create a task
      const taskResponse = await client.controllerApi.createTask({
        user_id: 'user_12345'
      });

      console.log('Task created:', taskResponse.id);
      console.log('Welcome:', taskResponse.welcome_message);

      // Step 2: Submit a message (non-streaming)
      const messageResponse = await client.controllerApi.sendMessage({
        task_id: taskResponse.id,
        text: 'I am looking for a microwave with at least 20 liters capacity',
        is_external_api: true
      });

      console.log('Agent response:', messageResponse.text);
      
      // Check for product recommendations
      if (messageResponse.cards && messageResponse.cards.length > 0) {
        console.log('\nProduct recommendations:');
        messageResponse.cards.forEach(card => {
          console.log(`- ${card.name}`);
        });
      }

      // Step 3: Retrieve all messages
      const messages = await client.controllerApi.getTaskMessages(taskResponse.id);
      
      console.log(`\nTotal messages: ${messages.length}`);
      messages.forEach(msg => {
        console.log(`[${msg.sender.type}]: ${msg.text}`);
      });
    }

    createFirstTask();
    ```
  </CodeBlock>
  <CodeBlock title="Python">
    ```python
    import os
    from aui import ApolloClient

    client = ApolloClient(network_api_key=os.environ['AUI_API_KEY'])

    # Step 1: Create a task
    task_response = client.controller_api.create_task(
        user_id='user_12345'
    )

    print(f'Task created: {task_response.id}')
    print(f'Welcome: {task_response.welcome_message}')

    # Step 2: Submit a message (non-streaming)
    message_response = client.controller_api.send_message(
        task_id=task_response.id,
        text='I am looking for a microwave with at least 20 liters capacity',
        is_external_api=True
    )

    print(f'Agent response: {message_response.text}')

    # Check for product recommendations
    if hasattr(message_response, 'cards') and message_response.cards:
        print('\nProduct recommendations:')
        for card in message_response.cards:
            print(f'- {card.name}')

    # Step 3: Retrieve all messages
    messages = client.controller_api.get_task_messages(task_id=task_response.id)

    print(f'\nTotal messages: {len(messages)}')
    for msg in messages:
        print(f'[{msg.sender.type}]: {msg.text}')
    ```
  </CodeBlock>
</CodeBlocks>

## Key Takeaways

- **Tasks** are containers for conversations with unique IDs
- **Metadata** helps you track context and organize tasks
- **Messages** flow between users and the AI agent
- **Actor types** distinguish between user and agent messages

## Next Steps

- Learn about [Real-time Communication](/realtime-communication) with WebSockets
- Explore [Tasks](/tasks) in depth
- Understand [Messages](/messages) and pagination
- Check the [API Reference](/api-reference) for all endpoints
